<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>R-Type: How To Create A Client With Any Language</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">R-Type<span id="projectnumber">&#160;0.0.1</span>
   </div>
   <div id="projectbrief">R-Type game with networking capabilities</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">How To Create A Client With Any Language </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This document provides a step-by-step guide on how to create a client for the R-Type project. The client is responsible for connecting to the main server, joining lobbies, and interacting with other players in real-time. By following these instructions, you will be able to create a functional client that can participate in multiplayer matches.</p>
<h1><a class="anchor" id="autotoc_md28"></a>
Prerequisites</h1>
<p>Before creating a client for the R-Type project, make sure you have the following prerequisites installed on your system:</p>
<ul>
<li><b>CMake</b>: A cross-platform build system that generates native build files.</li>
<li><b>Clang++ Compiler</b>: A compiler that supports C++17 or higher.</li>
<li><b>Asio Library</b>: A cross-platform C++ library for network and low-level I/O programming.</li>
<li><b>Lz4 Library</b>: A fast compression algorithm library that optimizes data transmission over the network.</li>
</ul>
<h1><a class="anchor" id="autotoc_md29"></a>
Steps to Create a Client</h1>
<p>Follow these steps to create a client for the R-Type project:</p>
<h2><a class="anchor" id="autotoc_md30"></a>
Step 1: Connect to the Main Server</h2>
<p>The first step is to establish a connection with the main server. Use a network library like Asio to create a UDP connection to the server's IP address and port number.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;asio.hpp&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="../../df/d62/client_2main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>() {</div>
<div class="line">    asio::io_context io_context;</div>
<div class="line">    asio::ip::udp::socket socket(io_context, asio::ip::udp::endpoint(asio::ip::udp::v4(), 0));</div>
<div class="line">    asio::ip::udp::endpoint server_endpoint(asio::ip::address::from_string(<span class="stringliteral">&quot;127.0.0.1&quot;</span>), 8080);</div>
<div class="line"> </div>
<div class="line">    socket.connect(server_endpoint);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclient_2main_8cpp_html_a0ddf1224851353fc92bfbff6f499fa97"><div class="ttname"><a href="../../df/d62/client_2main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a></div><div class="ttdeci">int main(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> main.cpp:18</div></div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">import</span> socket</div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span><a class="code hl_function" href="../../df/d62/client_2main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>():</div>
<div class="line">    server_address = (<span class="stringliteral">&#39;127.0.0.1&#39;</span>, 8080)</div>
<div class="line">    client_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</div>
<div class="line">    client_socket.connect(server_address)</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&#39;__main__&#39;</span>:</div>
<div class="line">    <a class="code hl_function" href="../../df/d62/client_2main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>()</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md31"></a>
Step 2: Login and Authentication</h2>
<p>Once connected to the server, you need to implement a login mechanism to authenticate the client. Send a login request to the server with the client's credentials and wait for a response. I will show how the create a packet and send it to the server.</p>
<h2><a class="anchor" id="autotoc_md32"></a>
How does the login work ?</h2>
<p>You need to send a packet to the server that begin with a header that contains the size of the packet and the type of the packet. The server will read the header and then the data of the packet. The server will then check the type of the packet and will execute the corresponding function.</p>
<p>i will show you how to create a packet and send it to the server.</p>
<p>If you are using our Packet class, you can create a packet like this:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;Packet.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;PacketFactory.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;PacketACK.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;PacketCMD.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="../../df/d62/client_2main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>() {</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//Connect to the server</span></div>
<div class="line">    </div>
<div class="line">    {...}</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_classRef" href="https://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> message = <span class="stringliteral">&quot;login user password&quot;</span>;</div>
<div class="line">    <span class="keyword">auto</span> packet = PacketFactory::create_packet(PacketFactory::TypePacket::CMD, socket_);</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">dynamic_cast&lt;</span>PacketCMD*<span class="keyword">&gt;</span>(packet.get())-&gt;format_data(message);</div>
<div class="line">    packet-&gt;send_packet(remote_endpoint_);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="abasic_string_html"><div class="ttname"><a href="https://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a></div></div>
</div><!-- fragment --><p>if you are not using our Packet class, you can create a packet by setting the size of the packet and the type of the packet and then send it to the server.</p>
<p>So to login the header will look like this:</p>
<p>size = 1 - 3 bytes | id = 1 - 2 bytes | type = 1 bytes</p>
<h3><a class="anchor" id="autotoc_md33"></a>
in this casse &lt;tt&gt;type&lt;/tt&gt; will be a two bytes equal to 2, &lt;tt&gt;id&lt;/tt&gt; will be a two bytes equal to 1 and &lt;tt&gt;size&lt;/tt&gt; will be a three bytes equal to the size of the data.</h3>
<p>The data will look like this: <code>login user password</code></p>
<p>Then just send the packet to the server.</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> socket</div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span><a class="code hl_function" href="../../df/d62/client_2main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>():</div>
<div class="line">    server_address = (<span class="stringliteral">&#39;127.0.0.1&#39;</span>, 8080)</div>
<div class="line">    client_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</div>
<div class="line">    client_socket.connect(server_address)</div>
<div class="line">    </div>
<div class="line">    message = <span class="stringliteral">&quot;login user password&quot;</span></div>
<div class="line">    message = message.encode()</div>
<div class="line">    </div>
<div class="line">    size = len(message).to_bytes(3, byteorder=<span class="stringliteral">&#39;big&#39;</span>)</div>
<div class="line">    id = 1.to_bytes(2, byteorder=<span class="stringliteral">&#39;big&#39;</span>)</div>
<div class="line">    type = 2.to_bytes(1, byteorder=<span class="stringliteral">&#39;big&#39;</span>)</div>
<div class="line">    </div>
<div class="line">    packet = size + id + type + message</div>
<div class="line">    client_socket.send(packet)</div>
<div class="line">    </div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&#39;__main__&#39;</span>:</div>
<div class="line">    <a class="code hl_function" href="../../df/d62/client_2main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>()</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md34"></a>
Step 3: Join a Lobby</h2>
<p>After successful authentication, the client can join a lobby by sending a join request to the server. The server will assign a unique lobby ID to the client, allowing them to interact with other players in the same lobby.</p>
<h2><a class="anchor" id="autotoc_md35"></a>
How does the join / create lobby work ?</h2>
<p>You need to send a packet to the server that begin with a header that contains the size of the packet and the type of the packet. The server will read the header and then the data of the packet. The server will then check the type of the packet and will execute the corresponding function.</p>
<p>i will show you how to create a packet and send it to the server.</p>
<p>If you are using our Packet class, you can create a packet like this:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;Packet.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;PacketFactory.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;PacketACK.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;PacketCMD.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="../../df/d62/client_2main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>() {</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//Connect to the server</span></div>
<div class="line">    </div>
<div class="line">    {...}</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_classRef" href="https://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> message = <span class="stringliteral">&quot;join_lobby lobby_id&quot;</span>;</div>
<div class="line">    <span class="comment">//std::string message = &quot;create_lobby&quot;; if you want to create a lobby</span></div>
<div class="line">    </div>
<div class="line">    <span class="keyword">auto</span> packet = PacketFactory::create_packet(PacketFactory::TypePacket::CMD, socket_);</div>
<div class="line">        </div>
<div class="line">    <span class="keyword">dynamic_cast&lt;</span>PacketCMD*<span class="keyword">&gt;</span>(packet.get())-&gt;format_data(message);</div>
<div class="line">    packet-&gt;send_packet(remote_endpoint_);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><p>if you are not using our Packet class, you can create a packet by setting the size of the packet and the type of the packet and then send it to the server.</p>
<p>So to join a lobby the header will look like this:</p>
<p>size = 1 - 3 bytes | id = 1 - 2 bytes | type = 1 bytes</p>
<h3><a class="anchor" id="autotoc_md36"></a>
in this casse &lt;tt&gt;type&lt;/tt&gt; will be a two bytes equal to 2, &lt;tt&gt;id&lt;/tt&gt; will be a two bytes equal to 1 and &lt;tt&gt;size&lt;/tt&gt; will be a three bytes equal to the size of the data.</h3>
<p>The data will look like this: <code>join_lobby lobby_id</code> or <code>create_lobby</code></p>
<p>Then just send the packet to the server.</p>
<p>no need to show the python code, it's the same as the login.</p>
<h2><a class="anchor" id="autotoc_md37"></a>
Step 4: Interact with Other Players</h2>
<p>Once in a lobby, the client can interact with other players by sending messages, game commands, or other data. Implement the necessary communication protocols to exchange information with other clients in real-time.</p>
<h2><a class="anchor" id="autotoc_md38"></a>
Conclusion</h2>
<p>By following these steps, you can create a client for the R-Type project that can connect to the main server, join lobbies, and interact with other players. Make sure to handle network errors and edge cases to ensure a smooth multiplayer experience for all participants. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
