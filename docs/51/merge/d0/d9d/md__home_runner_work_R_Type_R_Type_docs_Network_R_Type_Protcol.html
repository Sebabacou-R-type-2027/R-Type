<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>R-Type: RFC: R-Type Protocol Documentation</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">R-Type<span id="projectnumber">&#160;0.0.1</span>
   </div>
   <div id="projectbrief">R-Type game with networking capabilities</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">RFC: R-Type Protocol Documentation </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md25"></a>
1. Introduction</h1>
<p>This document defines the structure and types of packets used in the <b>R-Type</b> protocol. This protocol is designed for efficient data transmission in a network environment, where each packet consists of a size, an identifier, a type, and data.</p>
<h1><a class="anchor" id="autotoc_md26"></a>
2. Structure of a Packet</h1>
<p>Each packet is structured to include four main fields: <b>SIZE</b>, <b>ID</b>, <b>TYPE</b>, and <b>DATA</b>. These fields define the size of the contained data, the identification of the packet, its type, and the data itself.</p>
<h2><a class="anchor" id="autotoc_md27"></a>
2.1 Packet Format</h2>
<p>The following table describes the structure of a packet in the <b>PACKET</b> protocol:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><b>NAME</b>   </th><th class="markdownTableHeadNone"><b>SIZE</b>   </th><th class="markdownTableHeadNone"><b>DESCRIPTION</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SIZE   </td><td class="markdownTableBodyNone">1/2/3 Bytes   </td><td class="markdownTableBodyNone">The size of the data in the DATA field. It can be encoded in 1, 2, or 3 bytes depending on the size of the data.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ID   </td><td class="markdownTableBodyNone">1/2 Bytes   </td><td class="markdownTableBodyNone">Unique identifier for the packet, encoded in 1 or 2 bytes depending on the ID.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">TYPE   </td><td class="markdownTableBodyNone">1 Byte   </td><td class="markdownTableBodyNone">Packet type, indicating the nature of the data. Each type has a specific meaning.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">DATA   </td><td class="markdownTableBodyNone">Variable (SIZE)   </td><td class="markdownTableBodyNone">The content of the packet, the length of which is defined by the SIZE field.   </td></tr>
</table>
<p>The <b>SIZE</b>, <b>ID</b>, <b>TYPE</b>, and <b>DATA</b> fields are mandatory for every packet. The total length of the packet varies depending on the size of the data, as indicated by the <b>SIZE</b> field.</p>
<h2><a class="anchor" id="autotoc_md28"></a>
2.2 Size Field (SIZE)</h2>
<ul>
<li>The <b>SIZE</b> field indicates the size of the data in the <b>DATA</b> field.</li>
<li>If the size is small (less than or equal to 255 bytes), it is represented by 1 byte.</li>
<li>If the size of the data is larger (up to 65535 bytes), it is represented by 2 bytes.</li>
<li>If the size exceeds 65535 bytes, the field is encoded in 3 bytes (max 16777215 bytes). <blockquote class="doxtable">
<p>&zwj;/!\ You can use a size with a size on 3 bytes, but it's not recommended, prefer to use 1 or 2 bytes and do multiple packets if needed. </p>
</blockquote>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md29"></a>
2.3 Identification Field (ID)</h2>
<ul>
<li>The <b>ID</b> field uniquely identifies each packet.</li>
<li>This field is encoded in 1 or 2 bytes depending on the context.</li>
<li>The packets sent can be distinguished by their <b>ID</b>, which is crucial for reconstructing or analyzing data over the network.</li>
</ul>
<h2><a class="anchor" id="autotoc_md30"></a>
2.4 Type Field (TYPE)</h2>
<ul>
<li>The <b>TYPE</b> field is a single byte that identifies the nature of the data in the packet.</li>
<li>The type allows packets to be categorized for better management and interpretation on the receiver's side.</li>
</ul>
<h1><a class="anchor" id="autotoc_md31"></a>
3. Types of Packets</h1>
<p>The <b>TYPE</b> field in the packet differentiates between various packet types used in the protocol. Below is a list of defined packet types:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><b>TYPE Value</b>   </th><th class="markdownTableHeadNone"><b>Description</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x00   </td><td class="markdownTableBodyNone"><b>PING_PACKET</b>: Sends a ping to a client to test connectivity or determine a host.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x01   </td><td class="markdownTableBodyNone"><b>ACK_PACKET</b>: Used to send an acknowledgment back to the sender, can be true or false.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">...   </td><td class="markdownTableBodyNone">...   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md32"></a>
4. Packet Handling</h1>
<h2><a class="anchor" id="autotoc_md33"></a>
4.1 Transmission</h2>
<p>When transmitting a packet, the sender must:</p><ol type="1">
<li>Define the correct <b>SIZE</b> field based on the size of the data.</li>
<li>Assign a unique <b>ID</b> to the packet, ensuring that each packet can be distinctly identified.</li>
<li>Assign the <b>TYPE</b> field based on the nature of the data or request.</li>
<li>Transmit the packet, including the <b>DATA</b> field with the length corresponding to the <b>SIZE</b> field.</li>
</ol>
<h2><a class="anchor" id="autotoc_md34"></a>
4.2 Reception</h2>
<p>The receiver must:</p><ol type="1">
<li>Read the <b>SIZE</b> field to determine the length of the data.</li>
<li>Extract the <b>TYPE</b> field and interpret the data accordingly.</li>
<li>Process the <b>DATA</b> field based on the type of packet received.</li>
<li>Respond to the sender as needed, such as sending an acknowledgment or processing the data.</li>
</ol>
<h1><a class="anchor" id="autotoc_md35"></a>
5. Error Handling</h1>
<p>The protocol accounts for several error scenarios that may occur during packet transmission or reception:</p><ul>
<li><b>Invalid Size</b>: If the <b>SIZE</b> field does not match the length of the received data, an <b>ERROR_PACKET</b> is returned.</li>
<li><b>Unknown Type</b>: If the <b>TYPE</b> field contains an unrecognized value, an <b>ERROR_PACKET</b> is sent with a description of the error.</li>
<li><b>Timeouts</b>: If a response to a <b>PING_PACKET</b> is not received, a reconnection attempt can be initiated, or an <b>ERROR_PACKET</b> can be generated.</li>
</ul>
<h1><a class="anchor" id="autotoc_md36"></a>
6. Conclusion</h1>
<p>This packet protocol provides a flexible and lightweight structure for transmitting data while ensuring the integrity of transmissions through well-defined size, type, and identification fields. The packet types allow for efficient communication management, whether for regular data, acknowledgments, or connectivity tests. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
